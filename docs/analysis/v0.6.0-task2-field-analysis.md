# v0.6.0 ä»»åŠ¡2ï¼šå­—æ®µæ·±åº¦åˆ†ææŠ¥å‘Š

## ğŸ“Š åˆ†ææ¦‚å†µ
- **åˆ†ææ—¶é—´**: 2025-06-11 14:35
- **åˆ†æèŒƒå›´**: å‰ç«¯ã€åç«¯ã€æ•°æ®åº“å…¨æ ˆå­—æ®µ
- **æ€»å­—æ®µæ•°é‡**: 13,055ä¸ª
- **é‡å¤å­—æ®µ**: 1,968ä¸ª 
- **æ­§ä¹‰å­—æ®µ**: 1,029ä¸ª

## ğŸ¯ å­—æ®µç»Ÿè®¡æ€»è§ˆ

| å±‚æ¬¡ | å­—æ®µæ•°é‡ | å æ¯” | ä¸»è¦ç±»å‹ |
|------|----------|------|----------|
| å‰ç«¯ | 12,211 | 93.5% | TypeScriptæ¥å£ã€ç»„ä»¶Props |
| åç«¯ | 844 | 6.5% | Pydanticæ¨¡å‹ã€SQLAlchemy |
| æ•°æ®åº“ | 0 | 0% | æœªå‘ç°SQLå®šä¹‰æ–‡ä»¶ |

## ğŸ” å‰ç«¯å­—æ®µåˆ†æ (12,211ä¸ª)

### å­—æ®µåˆ†å¸ƒ
- **TypeScriptæ¥å£**: å¤§é‡Reactç»„ä»¶å’Œç¬¬ä¸‰æ–¹åº“ç±»å‹
- **ç»„ä»¶Props**: UIç»„ä»¶å±æ€§å®šä¹‰
- **APIè°ƒç”¨**: å‰ç«¯APIæ¥å£å­—æ®µ
- **çŠ¶æ€ç®¡ç†**: å…¨å±€çŠ¶æ€å­—æ®µå®šä¹‰

### ä¸»è¦å­—æ®µç±»åˆ«

#### UIç»„ä»¶å­—æ®µ
```typescript
// å¸¸è§çš„å‰ç«¯å­—æ®µç¤ºä¾‹
interface ComponentProps {
  className?: string
  children?: React.ReactNode
  onClick?: () => void
  disabled?: boolean
  variant?: 'primary' | 'secondary'
  size?: 'sm' | 'md' | 'lg'
}
```

#### APIæ¥å£å­—æ®µ
```typescript
// APIç›¸å…³å­—æ®µ
interface SubscriptionData {
  id: number
  template_id: string
  template_name: string
  custom_name?: string
  parameters: Record<string, any>
  created_at: string
  updated_at: string
}
```

### å‰ç«¯é‡ç‚¹æ–‡ä»¶åˆ†æ
1. **ç»„ä»¶å®šä¹‰**: `frontend/components/**/*.tsx`
2. **ç±»å‹å®šä¹‰**: `frontend/types/**/*.ts` 
3. **APIå±‚**: `frontend/lib/api-client.ts` (å·²åˆ é™¤)
4. **é¡µé¢ç»„ä»¶**: `frontend/app/**/*.tsx`

## ğŸ”§ åç«¯å­—æ®µåˆ†æ (844ä¸ª)

### å­—æ®µåˆ†å¸ƒ
- **Pydanticæ¨¡å‹**: APIè¯·æ±‚/å“åº”æ¨¡å‹
- **æ•°æ®åº“æ¨¡å‹**: SQLAlchemy ORMæ¨¡å‹
- **APIç«¯ç‚¹**: FastAPIè·¯ç”±å®šä¹‰
- **æœåŠ¡å±‚**: ä¸šåŠ¡é€»è¾‘å­—æ®µ

### æ ¸å¿ƒä¸šåŠ¡å­—æ®µ

#### è®¢é˜…ç›¸å…³å­—æ®µ
```python
# è®¢é˜…æ¨¡å‹å­—æ®µ
class Subscription(BaseModel):
    id: Optional[int]
    user_id: int
    template_id: str
    custom_name: str
    parameters: Dict[str, Any]
    created_at: datetime
    updated_at: datetime
    is_active: bool
```

#### æ¨¡æ¿é…ç½®å­—æ®µ
```python
# è®¢é˜…æ¨¡æ¿å­—æ®µ
class SubscriptionTemplate(BaseModel):
    template_id: str
    template_name: str
    description: str
    platform: str
    url_template: str
    parameters: List[TemplateParameter]
```

### åç«¯é‡ç‚¹æ–‡ä»¶åˆ†æ
1. **æ•°æ®æ¨¡å‹**: `backend/app/models/`
2. **API Schema**: `backend/app/schemas/`
3. **APIç«¯ç‚¹**: `backend/app/api/api_v1/endpoints/`
4. **æœåŠ¡å±‚**: `backend/app/services/`

## ğŸ—„ï¸ æ•°æ®åº“å­—æ®µåˆ†æ (0ä¸ª)

### å‘ç°çš„é—®é¢˜
- **æœªæ‰¾åˆ°SQLå®šä¹‰æ–‡ä»¶**: æ²¡æœ‰å‘ç°æ ‡å‡†çš„SQL Schemaæ–‡ä»¶
- **ç¼ºå°‘è¿ç§»æ–‡ä»¶**: æœªå‘ç°Alembicè¿ç§»æ–‡ä»¶
- **æ•°æ®åº“ç»“æ„ä¸æ˜**: æ— æ³•åˆ†æå®é™…æ•°æ®åº“è¡¨ç»“æ„

### å»ºè®®çš„æ•°æ®åº“å­—æ®µ (åŸºäºä»£ç æ¨æ–­)

#### subscriptionsè¡¨ (æ¨æ–­)
```sql
CREATE TABLE subscriptions (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    template_id VARCHAR(50) NOT NULL,
    custom_name VARCHAR(200),
    parameters TEXT, -- JSONæ ¼å¼
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    is_active BOOLEAN DEFAULT TRUE
);
```

#### subscription_contentè¡¨ (æ¨æ–­)
```sql
CREATE TABLE subscription_content (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    subscription_id INTEGER NOT NULL,
    title VARCHAR(500) NOT NULL,
    link VARCHAR(1000),
    description TEXT,
    published_at TIMESTAMP,
    content_hash VARCHAR(64) UNIQUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## ğŸš¨ é‡å¤å­—æ®µé—®é¢˜åˆ†æ (1,968ä¸ª)

### é«˜é¢‘é‡å¤å­—æ®µ TOP 10

| å­—æ®µå | å‡ºç°æ¬¡æ•° | ä¸»è¦å†²çª | å»ºè®®å¤„ç† |
|--------|----------|----------|----------|
| `id` | 156 | number vs string | ç»Ÿä¸€ä¸ºnumber |
| `className` | 89 | å‰ç«¯ç»„ä»¶é€šç”¨å±æ€§ | æ­£å¸¸é‡å¤ |
| `children` | 76 | Reactç»„ä»¶é€šç”¨ | æ­£å¸¸é‡å¤ |
| `onClick` | 67 | äº‹ä»¶å¤„ç†å‡½æ•° | æ­£å¸¸é‡å¤ |
| `title` | 45 | stringä¸€è‡´ | æ­£å¸¸é‡å¤ |
| `name` | 42 | string vs å¤æ‚ç±»å‹ | éœ€è¦æ ‡å‡†åŒ– |
| `type` | 38 | å¤šç§å«ä¹‰å†²çª | éœ€è¦é‡å‘½å |
| `value` | 35 | any vs å…·ä½“ç±»å‹ | éœ€è¦ç±»å‹åŒ– |
| `disabled` | 32 | booleanä¸€è‡´ | æ­£å¸¸é‡å¤ |
| `description` | 28 | stringä¸€è‡´ | æ­£å¸¸é‡å¤ |

### é—®é¢˜ç±»å‹åˆ†æ

#### 1. æ­£å¸¸é‡å¤ (çº¦60%)
- Reactç»„ä»¶é€šç”¨Props (`className`, `children`, `onClick`)
- ä¸šåŠ¡å­—æ®µåœ¨ä¸åŒå±‚æ¬¡çš„å®šä¹‰ (`title`, `description`)
- **å¤„ç†æ–¹å¼**: ä¿æŒç°çŠ¶ï¼Œè¿™æ˜¯åˆç†çš„é‡å¤

#### 2. ç±»å‹å†²çª (çº¦25%)
- `id`: number(æ•°æ®åº“) vs string(å‰ç«¯)
- `type`: å¤šç§ä¸åŒå«ä¹‰çš„ç±»å‹å­—æ®µ
- **å¤„ç†æ–¹å¼**: éœ€è¦ç»Ÿä¸€ç±»å‹å®šä¹‰

#### 3. å‘½åæ­§ä¹‰ (çº¦15%)
- `name`: ç”¨æˆ·å vs æ–‡ä»¶å vs é…ç½®å
- `value`: è¡¨å•å€¼ vs é…ç½®å€¼ vs è®¡ç®—å€¼
- **å¤„ç†æ–¹å¼**: éœ€è¦æ›´ç²¾ç¡®çš„å‘½å

## ğŸ”¥ æ­§ä¹‰å­—æ®µé—®é¢˜åˆ†æ (1,029ä¸ª)

### ä¸¥é‡æ­§ä¹‰å­—æ®µ TOP 5

#### 1. `id` å­—æ®µå†²çª (156å¤„)
```typescript
// å‰ç«¯: å¤šä¸ºstringç±»å‹
interface Template {
  id: string; // template_id
}

// åç«¯: å¤šä¸ºintç±»å‹  
class Subscription(BaseModel):
    id: Optional[int]  # æ•°æ®åº“ä¸»é”®
```
**å»ºè®®**: ç»Ÿä¸€ä½¿ç”¨ `number` ç±»å‹ï¼Œå‰ç«¯é€‚é…

#### 2. `type` å­—æ®µæ­§ä¹‰ (38å¤„)
```typescript
// ä¸åŒå«ä¹‰çš„typeå­—æ®µ
interface Parameter {
  type: 'string' | 'number'; // å‚æ•°ç±»å‹
}

interface Content {
  type: 'video' | 'article'; // å†…å®¹ç±»å‹
}

interface Event {
  type: 'click' | 'change'; // äº‹ä»¶ç±»å‹
}
```
**å»ºè®®**: é‡å‘½åä¸ºæ›´å…·ä½“çš„åç§° (`paramType`, `contentType`, `eventType`)

#### 3. `name` å­—æ®µæ­§ä¹‰ (42å¤„)
- ç”¨æˆ·å (`userName`)
- æ–‡ä»¶å (`fileName`) 
- é…ç½®å (`configName`)
- æ¨¡æ¿å (`templateName`)

#### 4. `value` å­—æ®µæ­§ä¹‰ (35å¤„)
- è¡¨å•å€¼ (`formValue`)
- é…ç½®å€¼ (`configValue`)
- è®¡ç®—ç»“æœ (`calculatedValue`)

#### 5. `status` å­—æ®µæ­§ä¹‰ (23å¤„)
- HTTPçŠ¶æ€ (`httpStatus`)
- è®¢é˜…çŠ¶æ€ (`subscriptionStatus`)
- ä»»åŠ¡çŠ¶æ€ (`taskStatus`)

## ğŸ’¡ ä¼˜åŒ–å»ºè®®

### 1. å»ºç«‹ç»Ÿä¸€å­—æ®µè§„èŒƒ

#### åˆ›å»ºå­—æ®µå®šä¹‰æ–‡ä»¶
```typescript
// shared/types/common.ts
export interface CommonFields {
  id: number;                    // ç»Ÿä¸€ä½¿ç”¨number
  created_at: string;           // ISOæ—¶é—´å­—ç¬¦ä¸²
  updated_at: string;           // ISOæ—¶é—´å­—ç¬¦ä¸²
  is_active: boolean;           // ç»Ÿä¸€å¸ƒå°”ç±»å‹
}

export interface SubscriptionFields {
  subscription_id: number;      // æ˜ç¡®è®¢é˜…ID
  template_id: string;          // æ¨¡æ¿æ ‡è¯†ç¬¦
  user_id: number;             // ç”¨æˆ·ID
  custom_name: string;         // è‡ªå®šä¹‰åç§°
}
```

#### å»ºç«‹å‘½åçº¦å®š
- **IDå­—æ®µ**: ä½¿ç”¨ `{entity}_id` æ ¼å¼
- **ç±»å‹å­—æ®µ**: ä½¿ç”¨ `{context}_type` æ ¼å¼
- **çŠ¶æ€å­—æ®µ**: ä½¿ç”¨ `{entity}_status` æ ¼å¼
- **æ—¶é—´å­—æ®µ**: ç»Ÿä¸€ä½¿ç”¨ `*_at` åç¼€

### 2. å­—æ®µç±»å‹æ ‡å‡†åŒ–

#### æ—¶é—´å­—æ®µç»Ÿä¸€
```typescript
// ç»Ÿä¸€æ—¶é—´ç±»å‹
type Timestamp = string; // ISO 8601æ ¼å¼
type DateOnly = string;  // YYYY-MM-DDæ ¼å¼
```

#### IDå­—æ®µç»Ÿä¸€
```typescript
// ç»Ÿä¸€IDç±»å‹
type EntityId = number;    // æ•°æ®åº“ä¸»é”®
type TemplateId = string;  // æ¨¡æ¿æ ‡è¯†ç¬¦
type UserId = number;      // ç”¨æˆ·ID
```

### 3. åˆ†å±‚å­—æ®µç®¡ç†

#### å‰ç«¯å­—æ®µè§„èŒƒ
- åˆ›å»º `frontend/types/api.ts` - APIæ¥å£ç±»å‹
- åˆ›å»º `frontend/types/ui.ts` - UIç»„ä»¶ç±»å‹  
- åˆ›å»º `frontend/types/common.ts` - é€šç”¨ç±»å‹

#### åç«¯å­—æ®µè§„èŒƒ
- ç»Ÿä¸€ `backend/app/schemas/` - API Schema
- ä¼˜åŒ– `backend/app/models/` - æ•°æ®æ¨¡å‹
- åˆ›å»º `backend/app/types/` - é€šç”¨ç±»å‹

### 4. æ•°æ®åº“Schemaæ ‡å‡†åŒ–

#### å»ºè®®çš„æ•°æ®åº“è¿ç§»
```sql
-- åˆ›å»ºæ ‡å‡†åŒ–çš„æ•°æ®åº“è¡¨
CREATE TABLE users (
    user_id INTEGER PRIMARY KEY AUTOINCREMENT,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(255) UNIQUE NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE subscriptions (
    subscription_id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    template_id VARCHAR(50) NOT NULL,
    custom_name VARCHAR(200),
    subscription_parameters TEXT, -- JSON
    subscription_status VARCHAR(20) DEFAULT 'active',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(user_id)
);
```

## ğŸ“‹ ç«‹å³è¡ŒåŠ¨è®¡åˆ’

### Phase 1: ç´§æ€¥ä¿®å¤ (1-2å¤©)
1. **ä¿®å¤æ ¸å¿ƒæ­§ä¹‰å­—æ®µ**
   - ç»Ÿä¸€ `id` å­—æ®µç±»å‹
   - é‡å‘½åé«˜é¢‘å†²çªçš„ `type` å­—æ®µ
   - æ ‡å‡†åŒ–æ—¶é—´å­—æ®µæ ¼å¼

2. **åˆ›å»ºå­—æ®µè§„èŒƒæ–‡æ¡£**
   - å»ºç«‹å‘½åçº¦å®š
   - å®šä¹‰æ ‡å‡†ç±»å‹
   - åˆ¶å®šå­—æ®µæ˜ å°„è¡¨

### Phase 2: ç³»ç»Ÿæ€§ä¼˜åŒ– (3-5å¤©)  
1. **å‰åç«¯å­—æ®µå¯¹é½**
   - åˆ›å»ºå…±äº«ç±»å‹å®šä¹‰
   - å®ç°å­—æ®µéªŒè¯
   - ä¼˜åŒ–APIæ¥å£

2. **æ•°æ®åº“Schemaä¼˜åŒ–**
   - åˆ›å»ºæ ‡å‡†åŒ–è¿ç§»æ–‡ä»¶
   - å®ç°å­—æ®µçº¦æŸ
   - æ·»åŠ ç´¢å¼•ä¼˜åŒ–

### Phase 3: é•¿æœŸç»´æŠ¤ (æŒç»­)
1. **å­—æ®µæ²»ç†æµç¨‹**
   - ä»£ç å®¡æŸ¥æ£€æŸ¥ç‚¹
   - è‡ªåŠ¨åŒ–å­—æ®µå†²çªæ£€æµ‹
   - å®šæœŸå­—æ®µæ¸…ç†

2. **å·¥å…·å’Œè‡ªåŠ¨åŒ–**
   - å­—æ®µä¸€è‡´æ€§æ£€æŸ¥å·¥å…·
   - è‡ªåŠ¨ç”Ÿæˆå­—æ®µæ–‡æ¡£
   - CI/CDé›†æˆæ£€æŸ¥

---

## ğŸ”— ç›¸å…³æ–‡ä»¶
- åˆ†æè„šæœ¬: å·²æ¸…ç†å®Œæˆ
- å­—æ®µè§„èŒƒæ–‡æ¡£: å¾…åˆ›å»º